

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Eavesdropping on channels &mdash; QuNetSim  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Routing with Entanglement" href="entanglement_routing.html" />
    <link rel="prev" title="CHSH Game" href="chsh.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> QuNetSim
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#what-is-qunetsim">What is QuNetSim?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#who-should-use-qunetsim">Who should use QuNetSim?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#linux-mac-os-x">Linux / Mac OS X</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start.html">Quick Start Guide</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Design Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../components.html">Network Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../components/host.html">Host</a></li>
<li class="toctree-l3"><a class="reference internal" href="../components/network.html">Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../components/protocols.html">Protocols</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../objects.html">Network Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../objects/classical_storage.html">Classical Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../objects/message.html">Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="../objects/packet.html">Packet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../objects/quantum_storage.html">Quantum Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../objects/qubit.html">Qubit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../objects/routing_packet.html">Routing Packet</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../backends.html">Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backends.html#writing-an-own-backend">Writing an own Backend</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="send_data.html">Send Data Qubits</a></li>
<li class="toctree-l2"><a class="reference internal" href="send_epr.html">Send EPR Pairs</a></li>
<li class="toctree-l2"><a class="reference internal" href="chsh.html">CHSH Game</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Eavesdropping on channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="entanglement_routing.html">Routing with Entanglement</a></li>
<li class="toctree-l2"><a class="reference internal" href="QKD.html">Quantum Key Distribution</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QuNetSim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../examples.html">Examples</a> &raquo;</li>
        
      <li>Eavesdropping on channels</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/examples/packet_sniffing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="eavesdropping-on-channels">
<h1>Eavesdropping on channels<a class="headerlink" href="#eavesdropping-on-channels" title="Permalink to this headline">¶</a></h1>
<p>In this example we see how we can add an eavesdropper, or packet sniffer, to the network.
First, as always, we initialize our network:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
<span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Eve&quot;</span><span class="p">]</span>
<span class="n">network</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
<span class="n">network</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.0</span>

<span class="n">host_alice</span> <span class="o">=</span> <span class="n">Host</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">)</span>
<span class="n">host_alice</span><span class="o">.</span><span class="n">add_connection</span><span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">)</span>
<span class="n">host_alice</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="n">host_bob</span> <span class="o">=</span> <span class="n">Host</span><span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">)</span>
<span class="n">host_bob</span><span class="o">.</span><span class="n">add_connection</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">)</span>
<span class="n">host_bob</span><span class="o">.</span><span class="n">add_connection</span><span class="p">(</span><span class="s1">&#39;Eve&#39;</span><span class="p">)</span>
<span class="n">host_bob</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="n">host_eve</span> <span class="o">=</span> <span class="n">Host</span><span class="p">(</span><span class="s1">&#39;Eve&#39;</span><span class="p">)</span>
<span class="n">host_eve</span><span class="o">.</span><span class="n">add_connection</span><span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">)</span>
<span class="n">host_eve</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="n">host_eve</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="n">network</span><span class="o">.</span><span class="n">add_host</span><span class="p">(</span><span class="n">host_alice</span><span class="p">)</span>
<span class="n">network</span><span class="o">.</span><span class="n">add_host</span><span class="p">(</span><span class="n">host_bob</span><span class="p">)</span>
<span class="n">network</span><span class="o">.</span><span class="n">add_host</span><span class="p">(</span><span class="n">host_eve</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Next we can define the protocols for Alice and Eve. First Alice is sending classical messages to Eve and
next prepares qubits in the excited state and also sends them the Eve. Eve simply prints
her messages and measures her qubits.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">amount_to_transmit</span> <span class="o">=</span> <span class="mi">5</span>
<span class="k">def</span> <span class="nf">alice</span><span class="p">(</span><span class="n">host</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">amount_to_transmit</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;Hi Eve.&#39;</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Alice sends: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">host</span><span class="o">.</span><span class="n">send_classical</span><span class="p">(</span><span class="s1">&#39;Eve&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">await_ack</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">amount_to_transmit</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Alice sends qubit in the |1&gt; state&quot;</span><span class="p">)</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">Qubit</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
        <span class="n">q</span><span class="o">.</span><span class="n">X</span><span class="p">()</span>
        <span class="n">host</span><span class="o">.</span><span class="n">send_qubit</span><span class="p">(</span><span class="s1">&#39;Eve&#39;</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">await_ack</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">eve</span><span class="p">(</span><span class="n">host</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">amount_to_transmit</span><span class="p">):</span>
        <span class="n">alice_message</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">get_classical</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">seq_num</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Eve Received classical: </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">alice_message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">amount_to_transmit</span><span class="p">):</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">get_data_qubit</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">measure</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Eve measured: </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">m</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Now we want to program Bob who sits between Alice and Eve in the network to manipulate
the content of the messages being sent between them. For packets that contain qubits,
Bob performs an <span class="math notranslate nohighlight">\(X\)</span> operation on them, which will undo Alice’s <span class="math notranslate nohighlight">\(X\)</span> operation.
For packets with classical messages, Bob changes the content so as to let the receiver know
that he saw that message.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bob_sniffing_quantum</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">receiver</span><span class="p">,</span> <span class="n">qubit</span><span class="p">):</span>
    <span class="c1"># Bob applies an X operation to all qubits that are routed through him</span>
    <span class="n">qubit</span><span class="o">.</span><span class="n">X</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">bob_sniffing_classical</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">receiver</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
    <span class="c1"># Bob modifies the message content of all classical messages routed through him</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;** Bob was here :) ** &quot;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">content</span>
</pre></div>
</td></tr></table></div>
<p>We set these protocols to the hosts via the following code:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">host_bob</span><span class="o">.</span><span class="n">quantum_relay_sniffing</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">host_bob</span><span class="o">.</span><span class="n">set_quantum_relay_sniffing_function</span><span class="p">(</span><span class="n">bob_sniffing_quantum</span><span class="p">)</span>

<span class="n">host_bob</span><span class="o">.</span><span class="n">relay_sniffing</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">host_bob</span><span class="o">.</span><span class="n">set_relay_sniffing_function</span><span class="p">(</span><span class="n">bob_sniffing_classical</span><span class="p">)</span>

<span class="n">t1</span> <span class="o">=</span> <span class="n">host_alice</span><span class="o">.</span><span class="n">run_protocol</span><span class="p">(</span><span class="n">alice</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">host_eve</span><span class="o">.</span><span class="n">run_protocol</span><span class="p">(</span><span class="n">eve</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>We should see the following output:</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Alice sends: Hi Eve.
Eve Received classical: ** Bob was here :<span class="o">)</span> ** Hi Eve..
Alice sends: Hi Eve.
Eve Received classical: ** Bob was here :<span class="o">)</span> ** Hi Eve..
Alice sends: Hi Eve.
Eve Received classical: ** Bob was here :<span class="o">)</span> ** Hi Eve..
Alice sends: Hi Eve.
Eve Received classical: ** Bob was here :<span class="o">)</span> ** Hi Eve..
Alice sends: Hi Eve.
Eve Received classical: ** Bob was here :<span class="o">)</span> ** Hi Eve..
Alice sends qubit in the <span class="p">|</span><span class="m">1</span>&gt; state
Eve measured: <span class="m">0</span>.
Alice sends qubit in the <span class="p">|</span><span class="m">1</span>&gt; state
Eve measured: <span class="m">0</span>.
Alice sends qubit in the <span class="p">|</span><span class="m">1</span>&gt; state
Eve measured: <span class="m">0</span>.
Alice sends qubit in the <span class="p">|</span><span class="m">1</span>&gt; state
Eve measured: <span class="m">0</span>.
Alice sends qubit in the <span class="p">|</span><span class="m">1</span>&gt; state
Eve measured: <span class="m">0</span>.
</pre></div>
</td></tr></table></div>
<p>The full example is below.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">components.host</span> <span class="kn">import</span> <span class="n">Host</span>
<span class="kn">from</span> <span class="nn">components.network</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">objects.message</span> <span class="kn">import</span> <span class="n">Message</span>
<span class="kn">from</span> <span class="nn">objects.qubit</span> <span class="kn">import</span> <span class="n">Qubit</span>
<span class="kn">from</span> <span class="nn">components.logger</span> <span class="kn">import</span> <span class="n">Logger</span>

<span class="n">Logger</span><span class="o">.</span><span class="n">DISABLED</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">amount_transmit</span> <span class="o">=</span> <span class="mi">5</span>


<span class="k">def</span> <span class="nf">alice</span><span class="p">(</span><span class="n">host</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">amount_transmit</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;Hi Eve.&#39;</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Alice sends: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">host</span><span class="o">.</span><span class="n">send_classical</span><span class="p">(</span><span class="s1">&#39;Eve&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">await_ack</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">amount_transmit</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Alice sends qubit in the |1&gt; state&quot;</span><span class="p">)</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">Qubit</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
        <span class="n">q</span><span class="o">.</span><span class="n">X</span><span class="p">()</span>
        <span class="n">host</span><span class="o">.</span><span class="n">send_qubit</span><span class="p">(</span><span class="s1">&#39;Eve&#39;</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">await_ack</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">bob_sniffing_quantum</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">receiver</span><span class="p">,</span> <span class="n">qubit</span><span class="p">):</span>
    <span class="c1"># Bob applies an X operation to all qubits that are routed through him</span>
    <span class="n">qubit</span><span class="o">.</span><span class="n">X</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">bob_sniffing_classical</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">receiver</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
    <span class="c1"># Bob modifies the message content of all classical messages routed through him</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">Message</span><span class="p">):</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;** Bob was here :) ** &quot;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">content</span>


<span class="k">def</span> <span class="nf">eve</span><span class="p">(</span><span class="n">host</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">amount_transmit</span><span class="p">):</span>
        <span class="n">alice_message</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">get_classical</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">seq_num</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Eve Received classical: </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">alice_message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">amount_transmit</span><span class="p">):</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">get_data_qubit</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">measure</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Eve measured: </span><span class="si">%d</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="n">m</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
    <span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Eve&quot;</span><span class="p">]</span>
    <span class="n">network</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
    <span class="n">network</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="n">host_alice</span> <span class="o">=</span> <span class="n">Host</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">)</span>
    <span class="n">host_alice</span><span class="o">.</span><span class="n">add_connection</span><span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">)</span>
    <span class="n">host_alice</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">host_bob</span> <span class="o">=</span> <span class="n">Host</span><span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">)</span>
    <span class="n">host_bob</span><span class="o">.</span><span class="n">add_connection</span><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">)</span>
    <span class="n">host_bob</span><span class="o">.</span><span class="n">add_connection</span><span class="p">(</span><span class="s1">&#39;Eve&#39;</span><span class="p">)</span>
    <span class="n">host_bob</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">host_eve</span> <span class="o">=</span> <span class="n">Host</span><span class="p">(</span><span class="s1">&#39;Eve&#39;</span><span class="p">)</span>
    <span class="n">host_eve</span><span class="o">.</span><span class="n">add_connection</span><span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">)</span>
    <span class="n">host_eve</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.2</span>
    <span class="n">host_eve</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">network</span><span class="o">.</span><span class="n">add_host</span><span class="p">(</span><span class="n">host_alice</span><span class="p">)</span>
    <span class="n">network</span><span class="o">.</span><span class="n">add_host</span><span class="p">(</span><span class="n">host_bob</span><span class="p">)</span>
    <span class="n">network</span><span class="o">.</span><span class="n">add_host</span><span class="p">(</span><span class="n">host_eve</span><span class="p">)</span>

    <span class="n">host_bob</span><span class="o">.</span><span class="n">quantum_relay_sniffing</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">host_bob</span><span class="o">.</span><span class="n">set_quantum_relay_sniffing_function</span><span class="p">(</span><span class="n">bob_sniffing_quantum</span><span class="p">)</span>

    <span class="n">host_bob</span><span class="o">.</span><span class="n">relay_sniffing</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">host_bob</span><span class="o">.</span><span class="n">set_relay_sniffing_function</span><span class="p">(</span><span class="n">bob_sniffing_classical</span><span class="p">)</span>

    <span class="n">t1</span> <span class="o">=</span> <span class="n">host_alice</span><span class="o">.</span><span class="n">run_protocol</span><span class="p">(</span><span class="n">alice</span><span class="p">)</span>
    <span class="n">t2</span> <span class="o">=</span> <span class="n">host_eve</span><span class="o">.</span><span class="n">run_protocol</span><span class="p">(</span><span class="n">eve</span><span class="p">)</span>

    <span class="n">t1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="n">t2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

    <span class="n">network</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
    <span class="nb">exit</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Stephen DiAdamo, Janis Nötzel

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>